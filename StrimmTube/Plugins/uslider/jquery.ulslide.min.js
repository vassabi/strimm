(function(a){function b(e){var d=a.data(e,"uslTransformRotateY");var f=a.data(e,"uslTransformTranslateZ");var c="";if(d!==undefined){c+=" rotateY("+d+"deg) "}if(f!==undefined){c+=" translateZ("+f+"px) "}a(e).css({"-webkit-transform":c,transform:c})}a.cssHooks.uslTransformRotateY={set:function(d,e,c){a.data(d,"uslTransformRotateY",parseInt(e));b(d)},get:function(e,d){var c=a.data(e,"uslTransformRotateY");var f=c?c:0;return f}};a.cssHooks.uslTransformTranslateZ={set:function(d,e,c){a.data(d,"uslTransformTranslateZ",parseInt(e));b(d)},get:function(d,c){var e=a.data(d,"uslTransformTranslateZ");var f=e?e:0;return f}};a.fx.step.uslTransformRotateY=function(c){a.cssHooks.uslTransformRotateY.set(c.elem,c.now,c.unit)};a.fx.step.uslTransformTranslateZ=function(c){a.cssHooks.uslTransformTranslateZ.set(c.elem,c.now,c.unit)};ulslideEffects={flip3D:{init:function(d,c){if(c.debug){console.log("ulslideEffects.flip3D.init();")}a(d).css({overflow:"visible",transformStyle:"preserve-3d"});a("> *",d).each(function(e){var f={uslTransformRotateY:"0deg",transformStyle:"preserve-3d","backface-visibility":"hidden","-webkit-backface-visibility":"hidden",top:"50%",left:"50%"};if(e==c.current){f.display="block"}else{f.display="none"}a(this).css(f)})},resize:function(d,c){if(c.debug){console.log("ulslideEffects.flip3D.resize();")}a(d).css({perspective:c.perspective+"px"});a("> *",d).each(function(e){var f={margin:("-"+(c.height/2)+"px 0 0-"+(c.width/2)+"px")};a(this).css(f)})},slide:function(e,d,h,f,g){if(d.debug){console.log("ulslideEffects.flip3D.slide();")}if(d.direction=="f"){var c={prev_start:"0deg",prev_finish:180,current_start:"180deg",current_finish:360}}else{var c={prev_start:"360deg",prev_finish:180,current_start:"180deg",current_finish:0}}h.css({uslTransformRotateY:c.prev_start,opacity:1,display:"block"});f.css({uslTransformRotateY:c.current_start,opacity:1,display:"block"});h.animate({uslTransformRotateY:c.prev_finish,opacity:0},{duration:d.duration,easing:d.easing});f.animate({uslTransformRotateY:c.current_finish,opacity:1},{duration:d.duration,easing:d.easing,complete:function(){g()}})}},cube3D:{init:function(d,c){if(c.debug){console.log("ulslideEffects.cube3D.init();")}a(d).css({transformStyle:"preserve-3d",overflow:"visible"});a("> *",d).each(function(e){var f={uslTransformRotateY:"0deg",transformStyle:"preserve-3d","backface-visibility":"hidden","-webkit-backface-visibility":"hidden",top:"50%",left:"50%"};if(e==c.current){f.display="block"}else{f.display="none"}a(this).css(f)})},resize:function(d,c){if(c.debug){console.log("ulslideEffects.cube3D.resize();")}var e=(c.perspective-c.width/2)/c.perspective;a(d).css({perspective:c.perspective+"px",transform:"scale("+e+")","-webkit-transform":"scale("+e+")"});a("> *",d).each(function(f){var g={uslTransformTranslateZ:(c.width/2)+"px",margin:("-"+(c.height/2)+"px 0 0-"+(c.width/2)+"px")};a(this).css(g)})},slide:function(e,d,h,f,g){if(d.debug){console.log("ulslideEffects.cube3D.slide();")}if(d.direction=="f"){var c={prev_start:"0deg",prev_finish:90,current_start:"-90deg",current_finish:0}}else{var c={prev_start:"0deg",prev_finish:-90,current_start:"90deg",current_finish:0}}h.css({uslTransformRotateY:c.prev_start,display:"block"});f.css({uslTransformRotateY:c.current_start,display:"block"});h.animate({uslTransformRotateY:c.prev_finish},{duration:d.duration,easing:d.easing});f.animate({uslTransformRotateY:c.current_finish},{duration:d.duration,easing:d.easing,complete:g})}},test:{init:function(d,c){if(c.debug){console.log("ulslideEffects.test.init();")}},resize:function(d,c){if(c.debug){console.log("ulslideEffects.test.resize();")}},slide:function(d,c,g,e,f){if(c.debug){console.log("ulslideEffects.test.slide();")}}}};ulslide_last_id=0;a.fn.ulslide=function(j){var h=this;if(h.length==0){return false}var k=h[0];if(!a(k).attr("id")){ulslide_last_id++;a(k).attr("id","ulslide-"+ulslide_last_id)}var e=a(k).attr("id");j=a.extend({effect:{type:"slide",axis:"x",distance:20},perspective:1000,duration:600,direction:"f",autoslide:false,current:0,canResize:false,width:h.width(),height:"auto",statusbar:true,loader:"",loadClass:"usl-loading",loadTimeout:5000,lazyload:false,ajax:false,mousewheel:false,pager:false,nextButton:false,prevButton:false,printCurrentTo:false,onAnimateStart:function(p,q){},onAnimate:function(p,q){},onAjaxStart:function(p,q){},onAjaxStop:function(p,q){},beforeResize:function(p,q){},onResize:function(p,q){},debug:false},j);if(typeof j.affect!="undefined"){j.effect["type"]=j.affect}if(typeof j.axis!="undefined"){j.effect["axis"]=j.axis}if(typeof j.padding!="undefined"){j.effect["distance"]=j.padding}if(typeof j.navigator!="undefined"){j.pager=j.navigator}if(typeof j.print_current!="undefined"){j.printCurrentTo=j.print_current}if(typeof j.bnext!="undefined"){j.nextButton=j.bnext}if(typeof j.bprev!="undefined"){j.prevButton=j.bprev}if(j.canResize&&j.height=="auto"){j.height=h.height()}if(typeof j.effect["distance"]=="undefined"){j.effect["distance"]=20}j.fwidth=j.width+j.effect["distance"];j.fheight=j.height+j.effect["distance"];j.prev=j.current;j.count=a("> *",h).length;if(j.lazyload){a("img",h).each(function(q){var p=a(this);p.attr("rel",p.attr("src"));if(q>0){p.removeAttr("src")}})}function f(r,s){if(r>=j.effect["showCount"]-s){var p=j.count-j.effect["showCount"];var q=(r+s-j.effect["showCount"])-p;return q}else{return r+s}}a("> *",h).each(function(q){var r=a(this);r.addClass("slide-node slide-node-"+q);r.css("position","absolute");r.css("margin","0");r.css("distance","0");r.css("width",j.width);r.css("overflow","hidden");if(j.effect["type"]=="carousel"){var p=f(q,j.current);if(j.effect["axis"]=="y"){r.css("top",(p*j.fheight));r.css("left","0")}else{r.css("top","0");r.css("left",(p*j.fwidth))}}else{if(q==j.current){r.css("top","0");r.css("left","0")}else{r.css("top","0");r.css("left",-(j.width+j.effect["distance"]))}}});h.css("list-style","none");h.css("distance","0");h.css("position","relative");h.css("padding",0);if((j.effect["type"]!="rotate")){h.css("overflow","hidden")}else{h.css("overflow","visible")}var o=ulslideEffects[j.effect["type"]];if(o!=undefined){o.init(h,j);o.resize(h,j)}if(!j.canResize){if(j.effect["type"]=="carousel"){if(j.effect["axis"]=="y"){h.css("width",j.width);h.css("height",j.fheight*j.effect["showCount"]-j.effect["distance"])}else{h.css("width",j.fwidth*j.effect["showCount"]-j.effect["distance"]);h.css("height",j.height)}}else{h.css("width",j.width);if(j.height=="auto"){h.css("height",a("> *:eq("+j.current+")",h).height())}else{h.css("height",j.height)}}j.prevHeight=j.height}function g(){var p=j.beforeResize(j,k);if(p&&p.width&&p.height){j.width=p.width;j.height=p.height}else{j.width=h.width();j.height=h.height()}j.fwidth=j.width+j.effect["distance"];j.fheight=j.height+j.effect["distance"];if(j.effect["type"]=="carousel"){if(j.effect["axis"]=="y"){h.css("width",j.width);h.css("height",j.fheight*j.effect["showCount"]-j.effect["distance"])}else{h.css("width",j.fwidth*j.effect["showCount"]-j.effect["distance"]);h.css("height",j.height)}}else{if(j.height=="auto"){h.css("height",a("> *:eq("+j.current+")",h).height());console.log("resize auto height: "+a("> *:eq("+j.current+")",h).height())}}j.prevHeight=j.height;a("> *",h).each(function(r){var s=a(this);s.addClass("slide-node slide-node-"+r);s.css("position","absolute");s.css("margin","0");s.css("distance","0");s.css("width",j.width);s.css("overflow","hidden");if(j.effect["type"]=="carousel"){var q=f(r,j.current);if(j.effect["axis"]=="y"){s.css("top",(q*j.fheight));s.css("left","0")}else{s.css("top","0");s.css("left",(q*j.fwidth))}}else{if(r==j.current){s.css("top","0");s.css("left","0")}else{s.css("top","0");s.css("left",-(j.width+j.effect["distance"]))}if(j.height=="auto"){s.css("height",a("> *:eq("+j.current+")",h).height())}else{s.css("height",j.height)}}});if(o!=undefined){o.resize(h,j)}j.onResize(j,k)}k.getSlide=function c(p){return a("> *:eq("+p+")",k)};function n(p){return p[Math.floor(Math.random()*p.length)]}function l(){var p=k.uslCurrent();j.direction="f";if(p+1<j.count){k.uslRefresh(p+1)}else{k.uslRefresh(0)}}function i(){var p=k.uslCurrent();j.direction="b";if(p>0){k.uslRefresh(p-1)}else{k.uslRefresh(j.count-1)}}if(j.height=="auto"){k.currentHeight=k.getSlide(j.current).height()}else{k.currentHeight=j.height}k.uslCurrent=function(q){if(q==undefined){return j.current}else{var p=k.uslCurrent();var r=q;j.current=q;return q}};k.autoslideNext=function(){l()};k.initAutoslide=function(){if(j.TimeoutID){clearTimeout(j.TimeoutID)}j.TimeoutID=setTimeout("jQuery('#"+a(k).attr("id")+"')[0].autoslideNext()",j.autoslide);if(j.debug){console.log("initAutoslide: "+j.TimeoutID)}};k.clearAutoslide=function(){if(j.TimeoutID){clearTimeout(j.TimeoutID)}};k.uslRefresh=function(u,q,w){if(j.debug){console.log("uslRefresh()")}if(!k.ready){if(j.debug){console.log("uslRefresh / "+j.id+": ! thisEl.ready")}setTimeout("jQuery('#"+a(k).attr("id")+"')[0].uslRefresh()",400);return}if(j.LoadTimeoutID){clearTimeout(j.LoadTimeoutID)}k.ready=false;if(typeof(u)!="undefined"){k.uslCurrent(u)}k.clearAutoslide();var t=k.getSlide(j.prev);var v=k.getSlide(j.current);v.css("display","block");function s(){if(j.debug){console.log("doRefresh()")}j.onAnimateStart(j,k);if(j.height=="auto"){k.currentHeight=k.getSlide(j.current).height();j.prevHeight=k.getSlide(j.prev).height()}function B(){if(j.debug){console.log("finish_animate(): start")}if(j.printCurrentTo){a(j.printCurrentTo).html(j.current+1)}if((j.prev!=j.current)&&(j.effect["type"]!="carousel")){t.css("display","none")}if(j.height=="auto"){h.animate({height:k.currentHeight},250)}if(j.debug){console.log("finish_animate(): autoslide = "+j.autoslide)}if(j.autoslide){k.initAutoslide()}j.onAnimate(j,k);j.prev=j.current;k.uslRefreshClasses();k.ready=true;if(typeof w!="undefined"){w()}}if(j.prev==j.current){B();return}if(j.effect["type"]=="slide"){var x=j.effect["axis"];if(x=="r"){x=n(["x","y"])}if(x=="x"){if(j.prev!=j.current){if(j.direction=="f"){t.animate({left:-(j.width+j.effect["distance"])},j.duration,j.easing);v.css("left",j.width+j.effect["distance"])}else{t.animate({left:j.width+j.effect["distance"]},j.duration,j.easing);v.css("left",-(j.width+j.effect["distance"]))}}v.css("top",0);t.css("top",0);v.animate({left:0},j.duration,j.easing,function(){B()})}else{if(j.prev!=j.current){if(j.direction=="f"){t.animate({top:k.currentHeight+j.effect["distance"]},j.duration,j.easing,function(){t.css("left",-(j.width+j.effect["distance"]))});v.css("top",-(j.prevHeight+j.effect["distance"]))}else{t.animate({top:-(k.currentHeight+j.effect["distance"])},j.duration,j.easing,function(){t.css("left",-(j.width+j.effect["distance"]))});v.css("top",j.prevHeight+j.effect["distance"])}}v.css("left",0);t.css("left",0);v.animate({top:0},j.duration,j.easing,function(){B()})}}else{if(j.effect["type"]=="fade"){v.css("display","none");v.css("left",0);v.css("top",0);var A=j.duration;if(typeof q!="undefined"){A=0}t.fadeOut(A,function(){t.css("display","none");v.fadeIn(A,function(){B()})})}else{if(j.effect["type"]=="crossfade"){v.css("display","none");v.css("left",0);v.css("top",0);var A=j.duration;if(typeof q!="undefined"){A=0}t.fadeOut(A,function(){t.css("display","none")});v.fadeIn(A,function(){B()})}else{if(j.effect["type"]=="rotate"){var z=j.direction=="f"?"-":"";v.animate({rotate:z+"90deg",scale:"0.01",opacity:0.3,"z-index":2,left:0,top:0},0);t.css("z-index",1);t.animate({opacity:0},j.duration,j.easing,function(){});v.animate({rotate:z+"360deg",scale:"1",opacity:1},j.duration,j.easing,function(){B()})}else{if(j.effect["type"]=="scale"){if(j.direction=="f"){var z="-";var y=""}else{var z="";var y="-"}v.animate({scale:"0.05",opacity:0.3,"z-index":2,left:0,top:0,marginLeft:y+(j.fwidth/2)+"px"},0);t.css("z-index",1);t.animate({scale:"0.01",opacity:0,marginLeft:z+(j.fwidth/2)+"px"},j.duration,j.easing,function(){});v.animate({scale:"1",opacity:1,marginLeft:"0px"},j.duration,j.easing,function(){B()})}else{if(j.effect["type"]=="carousel"){a("> *",h).each(function(D){liel=a(this);var C=f(D,j.current);if(j.direction=="f"){var E=f(D,j.current-1)}else{var E=f(D,j.current+1)}if(j.effect["axis"]=="y"){if((j.direction=="f")&&(C==0)){liel.css("top",(-1*j.fheight));liel.animate({top:C*j.fheight},j.duration,j.easing)}else{if((j.direction=="f")&&(E+1==j.effect["showCount"])){liel.animate({top:(j.effect["showCount"])*j.fheight},j.duration,j.easing)}else{if((j.direction=="b")&&(E==0)){liel.animate({top:-1*j.fheight},j.duration,j.easing)}else{if((j.direction=="b")&&(C+1==j.effect["showCount"])){liel.css("top",(C+1)*j.fheight);liel.animate({top:C*j.fheight},j.duration,j.easing)}else{if((C<j.effect["showCount"])&&(C>=0)){liel.animate({top:C*j.fheight},j.duration,j.easing)}else{liel.css("top",(C*j.fheight))}}}}}}else{if((j.direction=="f")&&(C==0)){liel.css("left",(-1*j.fwidth));liel.animate({left:C*j.fwidth},j.duration,j.easing)}else{if((j.direction=="f")&&(E+1==j.effect["showCount"])){liel.animate({left:(j.effect["showCount"])*j.fwidth},j.duration,j.easing)}else{if((j.direction=="b")&&(E==0)){liel.animate({left:-1*j.fwidth},j.duration,j.easing)}else{if((j.direction=="b")&&(C+1==j.effect["showCount"])){liel.css("left",(C+1)*j.fwidth);liel.animate({left:C*j.fwidth},j.duration,j.easing)}else{if((C<j.effect["showCount"])&&(C>=0)){liel.animate({left:C*j.fwidth},j.duration,j.easing)}else{liel.css("left",(C*j.fwidth))}}}}}}setTimeout(function(){B()},j.duration+100)})}}}}}}if(o!=undefined){o.slide(h,j,t,v,B)}}if(j.ajax){j.onAjaxStart(j,k);var p=k.getSlide(j.current)[0].usl_ajax_loaded;k.uslAjaxLoadSlide(j.current,function(){j.onAjaxStop(j,k);s()})}else{if(j.lazyload){var r=a("img",v[0]);r.each(function(y){var x=a(this);x.attr("src",x.attr("rel"))});j.z_img_count=r.length;j.z_img_loaded=0;r.each(function(){if(this.complete){j.z_img_loaded++}else{a(this).load(function(){j.z_img_loaded++;if(j.z_img_loaded==j.z_img_count){s()}})}});if(j.z_img_loaded==j.z_img_count){s()}return}s()}};k.uslAjaxLoadSlide=function(q,s){var r=k.getSlide(q);if(r[0].usl_ajax_loaded){s()}else{var p=a(j.pager).eq(q).attr("href");r[0].usl_ajax_loaded=true;r.load(p+"?ajax=1",false,s)}};k.uslRefreshClasses=function(){if(j.count>1){if(j.nextButton){a(j.nextButton).addClass("active")}if(j.prevButton){a(j.prevButton).addClass("active")}}if(j.pager){a(j.pager).removeClass("usl-current");a(j.pager+".usl-pager-"+k.uslCurrent()).addClass("usl-current");a(j.pager).parent().removeClass("usl-current-parent");a(j.pager+".usl-pager-"+k.uslCurrent()).parent().addClass("usl-current-parent")}};if(j.nextButton){a(j.nextButton).click(function(){l();return false})}if(j.prevButton){a(j.prevButton).click(function(){i();return false})}function d(q){var p=a(q);p.each(function(r){this.usl_navigator_index=r;a(this).addClass("usl-pager-"+r)});p.click(function(){var r=this.usl_navigator_index;if((r<j.count)&&(r!=k.uslCurrent())){if(r>k.uslCurrent()){j.direction="f"}else{j.direction="b"}k.uslRefresh(r)}return false})}if(j.pager){d(j.pager)}if(j.navigator2){d(j.navigator2)}function m(p){if(p){h.addClass("usl-loading");h.parent().addClass("usl-parent-loading");if(j.loader){jQuery(j.loader).addClass(j.loadClass)}}else{h.removeClass("usl-loading");h.parent().removeClass("usl-parent-loading");if(j.loader){jQuery(j.loader).removeClass(j.loadClass)}}}k.uslStatusbar=function(){function p(r){if(!r.complete){return false}if(typeof r.naturalWidth!=="undefined"&&r.naturalWidth===0){return false}return true}if(j.lazyload){var q=a(">li:eq("+j.current+") img",k)}else{var q=a("img",k)}j.img_count=q.length;if(j.img_count){m(true)}j.img_loaded=0;q.each(function(){if(p(this)){j.img_loaded++;if(j.debug){console.log(a(this).attr("src")+" loaded")}}else{a(this).load(function(){j.img_loaded++;if(j.debug){console.log("Img LOAD / "+j.img_loaded+" of "+j.img_count)}if(j.img_loaded==j.img_count){m(false);k.ready=true;k.uslRefresh()}});if(j.debug){console.log(a(this).attr("src")+" NOT loaded")}}});if(j.debug){console.log("uslStatusbar() / "+j.img_loaded+" of "+j.img_count)}if(j.img_loaded==j.img_count){m(false);k.ready=true;k.uslRefresh()}j.LoadTimeoutID=setTimeout(function(){m(false);k.ready=true;k.uslRefresh()},j.loadTimeout)};if(j.statusbar&&!j.ajax){k.uslStatusbar()}if(j.mousewheel){h.bind("mousewheel",function(p,q){if(k.ready){if(q<0){l()}else{i()}}return false})}if(j.canResize){h.on("resize",g);jQuery(window).on("resize",g);g()}if(!j.statusbar||j.ajax){k.ready=true;k.uslRefresh()}}})(jQuery);